<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DDD (Domain Driven Design)</title>
    <link rel="stylesheet" href="../css/main.css">
</head>
<body>
    <h1>DDD это набор Рекомендаций</h1>
    <b>The structure and language of the code should match that of the business domain</b>
    <h1>Основные принципы:</h1>
    <div class="tab">
        <b>Bounded contexts</b> Разграничение контекста - разделение домена на поддомены. Решение определённой подЗадачи. Содержит свою не пересекающуюся с другими Domain Model<br>
        <b>A part of the software where particular terms, rules and definitions apply consistently</b>
        <br>
        <div>
            <img src="../pictures/bounded_context.jpg" alt="Bounded contexts" width="650px">
        </div>
        <br>
        <b>Ubiquitous language</b> (юбиквитас) Единый язык для бизнеса и програмиста. DSL Domain Specific Language - Единый язык доведённый до абсолюта, его можно скомпилировать<br>
        <br>
        <b>Domain model</b><br>
        <div class="tab">
            <b>Anemic (Анемичная):</b> Содержит данные, не содержит логики. Логика в сервисе <br>
            <b>Rich (Богатая):</b> Содержит и данные и <b>логику бизнес правил.</b> Не только <b>состояние</b>, но и <b>поведение</b>. Контролирует 
            <b>консистентность данных <u>(Инкапсуляция!)</u></b>, что-бы все <b>инварианты</b> (условия) были соблюдены <br>
            <br>
            <b>Entity</b> (сущность) Фундаментальный элемент при построении контекста. Имеет <b>Id</b> и <b>жизненный цикл</b>.<br>
            <b>Value Object (immutable!): </b> Строительные блоки доменной модели. Позволяют сделать строгую типизацию. Логику надо спускать в них <br>
            <b>Aggregate</b> Собирательная сущность, единое целое имеет <b>Id</b>. Состоит из VO и Entity. Является границей транзакции. 
            Другие элементы домена не могут ссылаться на внутрености агрегата. Entity может находиться только в одном агрегате. <b>Repository для агрегата (не для Entity)</b> <br>
            <div>
                <img src="../pictures/anem-rich.jpg" alt="Anemic - rich" width="500px">
            </div>
        </div>
    </div>
    <br>
    <div>
        <img src="../pictures/domain_model_isolation.jpg" alt="Domain Model Isolation" width="650px">
    </div>
    <br>
    <b>Свойства DDD архитектуры</b>
    <div class="tab">
        <b>Разделение ответственности:</b> модель ответственна за доменные знания. За все внешние связи отвечает Application Sevice <br>
        <b>One way flow of dependencies:</b> Сервисы знают про модель, Модель НЕ знает про сервисы <br>
    </div>

    <b>Service</b> занимается:
    <div class="tab">
        <b>Координация операций</b> между различными предметными областями <br>
        <b>Сложная бизнес-логика</b> на основе данных из разных предметных областей <br>
        <b>Взаимодействие с внешними системами</b> DB, уведомления, обращение к веб сервисам <br>
        <b>Системные операции</b> аутентификация, авторизация или управление транзакциями <br>
        <b>Переиспользуемые операции</b> в различных контекстах <br>
    </div>
    <br>
    <b>Внешние слои зависят от внутренних, но не наоборот!</b>
    <div>
        <img src="../pictures/ddd_onion.jpg" alt="DDD onion" width="500px">
    </div>
    <br>
    <div>
        <img src="../pictures/ddd_trilema.jpg" alt="DDD trilema" width="700px">
    </div>
    <br>
    Метод либо выполняет работу, либо кидает Exception <br>
    <b>DTO (Data Transfer Object):</b> объект для передачи данных между слоёв. Не содержит логики <br>
    <br>

    POD
    Разграничивал контексты

    Ubiquitous language - словарь терминов

    <br>
</body>
</html>